<ion-content class="forgot-password-content">
  <div class="forgot-password-container">
    <!-- Header with Back Button -->
    <div class="header-section">
      <ion-button 
        fill="clear" 
        (click)="navigateToLogin()"
        class="back-btn">
        <ion-icon name="arrow-back" slot="icon-only"></ion-icon>
      </ion-button>
    </div>

    <!-- Success State -->
    <div *ngIf="emailSent" class="success-section">
      <div class="success-icon">
        <ion-icon name="checkmark-circle" class="check-icon"></ion-icon>
      </div>
      <h1 class="success-title">Email Enviado!</h1>
      <p class="success-subtitle">
        Verifique sua caixa de entrada e siga as instruções para redefinir sua senha.
      </p>
      <ion-button 
        expand="block" 
        (click)="navigateToLogin()"
        class="back-to-login-btn">
        Voltar ao Login
      </ion-button>
    </div>

    <!-- Form State -->
    <div *ngIf="!emailSent">
      <!-- Logo and Title Section -->
      <div class="title-section">
        <div class="icon-container">
          <ion-icon name="mail" class="mail-icon"></ion-icon>
        </div>
        <h1 class="title">Esqueceu a senha?</h1>
        <p class="subtitle">
          Digite seu email e enviaremos instruções para redefinir sua senha.
        </p>
      </div>

      <!-- Form -->
      <ion-card class="form-card">
        <ion-card-content>
          <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()">
            <!-- Email Field -->
            <ion-item 
              class="form-item"
              [class.item-has-error]="isFieldInvalid('email')"
              lines="none">
              <ion-icon name="mail" slot="start" class="field-icon"></ion-icon>
              <ion-label position="stacked">Email</ion-label>
              <ion-input
                type="email"
                formControlName="email"
                placeholder="seu@email.com"
                autocomplete="email"
                [clearInput]="true">
              </ion-input>
            </ion-item>
            <div class="error-message" *ngIf="isFieldInvalid('email')">
              {{ getFieldError('email') }}
            </div>

            <!-- Send Button -->
            <ion-button 
              expand="block" 
              type="submit"
              [disabled]="isLoading"
              class="send-btn">
              <ion-spinner *ngIf="isLoading" name="crescent" slot="start"></ion-spinner>
              <span *ngIf="!isLoading">Enviar Email</span>
              <span *ngIf="isLoading">Enviando...</span>
              <ion-icon *ngIf="!isLoading" name="send" slot="end"></ion-icon>
            </ion-button>
          </form>

          <!-- Back to Login -->
          <div class="login-section">
            <p class="login-text">
              Lembrou da senha?
              <ion-button 
                fill="clear" 
                size="small" 
                (click)="navigateToLogin()"
                class="login-btn">
                Fazer login
              </ion-button>
            </p>
          </div>
        </ion-card-content>
      </ion-card>
    </div>
  </div>
</ion-content>

